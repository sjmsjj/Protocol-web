{% extends 'base.html' %}

{% block page_title %}
    Protocol_list
{% endblock page_title %}

{% load protocol_tags %}

{% block main %}
    {% if not protocols %}
	    <br>
	    <br>
	    <h4 class="text-center">You current do not have ongoing experiments, you can go to add protocol section to add new protocols.</h4>
    {% else %}
		<div class='container'>
			<div class='row'>
				<div class='col-md-12 text-center'>
					<h2>All Available Protocols</h2>
				</div>
			</div>

			<div class='row'>
		    	<div class='col-md-12 table-responsive'>
				    <table id='tbProtocols' class='table table-striped table-bordere table-hover table-condensed'>
				        <thead>
				        	<tr>
				        		<td width='10%'>Category</td>
				        		<td width='70%'5>Protocol Name</td>
				        		<td width='20%' colspan="3">Action</td>
				        	</tr>
				        </thead>

				        <tbody>
				        	{% for protocol in protocols %}
					        	<tr id="{{protocol.name}}">
					        		{% if protocol.is_public %}
					        		    <td style="vertical-align:middle">Public</td>
					        		{% else %}
					        		    <td style="vertical-align:middle">Private</td>
					        		{% endif %}
					        		<td style="vertical-align:middle">
					        			<a style="font-size: 16px" href="{% url 'protocol_detail' protocol=protocol.name %}">{{protocol.name}}</a>
					        		</td>
				                    <td>
				                    	<button class='btnStartExperiment btn btn-primary' value='{{protocol.name}}'>Quick Start</button>
				                    </td>
				                    <td>
						        		{% if protocol.is_public %}
							        		<button class="btnChangeProcotolAccess btn btn-success" value='{{protocol.name}}' name='{{protocol.name}}'>Make Private</button>
						        		{% else %}
							        		<button class="btnChangeProcotolAccess btn btn-success" value='{{protocol.name}}' name='{{protocol.name}}'>Make Public&nbsp</button>
						        		{% endif %}
						        	</td>
									<td>
				                    	<button class="btnDeleteProtocol btn btn-warning" value='{{protocol.name}}' name='{{protocol.ninstance}}'>Delete</button>
				                    </td>
					        	</tr>
				        	{% endfor %}
				        </tbody>
				    </table>
			    </div>
		    </div>

	        <button style="display:none" id="btnNewExperimentSuceess" data-toggle="modal" data-target="#myModal"></button>

           <br>
           <br>
           <br>
			<div>
				<h4>Start New Experiment Verbosely</h4>
				<hr style="margin-top:10px;">
			</div>

			<div class="row">
				<div class="col-md-5">
					<label>Protocol: </label>
					<div role="form">
						<div class="form-group">
							<select id="protocol_list" class="form-control">
								{% for protocol in protocols %}
									<option value="{{protocol.name}}">{{protocol.name}}</option>
								{% endfor %}
							</select>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<form role="form">
						<div class="form-group">
							<label for="start_date" style="display:inline-block;">Start Date: </label>
							<input type="text" id="datepicker" class="form-control">
						</div>
				    </form>
				</div>

				<div class="col-md-4">
					<form role="form">
						<div class="form-group">
							<label for="start_date" style="display:inline-block;">Short Note(optional): </label>
							<input type="text" class="form-control" id="new_experiment_note">
						</div>
				    </form>
				</div>
			</div>

			<div class="row">
				<div class="col-md-offset-10 col-md-2">
					<button id="btnStart" class='btn btn-primary btn-block'>Start New Experiment</button>
				</div>
			</div>


            <div class="modal fade" id="myModal" role="dialog">
				<div class="modal-dialog">
				<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
				            <button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Success</h4>
							</div>
							<div class="modal-body">
								<p id="modalContent"></p>
							</div>
							<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>

		</div>
	{% endif %}

	{% include  'protocol/dynamic/protocol_list_js.html' %}
{% endblock main %}